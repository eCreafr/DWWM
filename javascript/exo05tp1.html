<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>progression scroll</title>
    <link rel="stylesheet" href="css/exo5tp1.css" />
    <link rel="stylesheet" href="../html/css/froggie.css" />
    <script>
      // on cree une fonction pour calculer et afficher la progression du scroll :
      function updateScrollProgress() {
        // on r√©cup√©re la position actuelle du scroll
        const scrollPosition =
          window.pageYOffset || document.documentElement.scrollTop;

        // on calcule la hauteur totale scrollable :
        const scrollHeight =
          document.documentElement.scrollHeight -
          document.documentElement.clientHeight;

        // on compare la position actuelle et la hauteur totale en pourcentage :
        const scrollPercentage = (scrollPosition / scrollHeight) * 100;

        // on arrondie pour faire propre :
        const roundedPercentage = Math.round(scrollPercentage * 100) / 100;

        //on met a jour la largeur du width css de notre progress bar de la barre de progression
        const progressBar = document.getElementById("progress-bar");
        progressBar.style.width = `${scrollPercentage}%`;

        // Pr√©parer le texte √† afficher
        let progressText = `${roundedPercentage}%`;

        // Ajouter un smiley si 100% est atteint
        if (roundedPercentage >= 100) {
          progressText += " üòä";
        }

        // Afficher la progression dans un √©l√©ment HTML
        document.getElementById("scroll-progress").textContent = progressText;
      }

      // on √©coute l'√©v√©nement de scroll
      window.addEventListener("scroll", updateScrollProgress);

      //  on itinialise au chargement
      updateScrollProgress();
    </script>
  </head>
  <body>
    <div id="progress-container">
      <div id="progress-bar"><div id="scroll-progress"></div></div>
    </div>

    <div class="spacer"></div>
    <div class="spacer"></div>

    <div class="froggiesplaining">
      <span> Froggiesplaining :</span>
      Ce script fonctionne de la mani√®re suivante : <br /><br />
      d'abord on ajoute les √©l√©ments HTML et CSS necessaires √† la scrollbar
      color√©e
      <br />
      puis on ajoute les lignes de javascript suivantes : <br />

      <img src="ressources/exo5tp1.png" alt="" class="img-responsive" />
      <br /><br />
      pour agir sur la "width" CSS en % de la scrollbar + ajouter le smiley avec
      une condition "if 100%".

      <img src="ressources/froggie-300.png" alt="Froggie" class="overfrog" />
    </div>
  </body>
</html>
